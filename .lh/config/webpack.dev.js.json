{
    "sourceFile": "config/webpack.dev.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1662338294376,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1662338391762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n  * @version: \r\n  * @Author: Leojias\r\n  * @Date: 2022-09-04 04:06:02\r\n  * @LastEditors: Leojias\r\n- * @LastEditTime: 2022-09-05 08:38:14\r\n+ * @LastEditTime: 2022-09-05 08:39:51\r\n  * \r\n  */\r\n const path = require(\"path\");\r\n const ESLintWebpackPlugin = require(\"eslint-webpack-plugin\");\r\n@@ -121,9 +121,9 @@\n         //html插件\r\n         new HtmlWebpackPlugin({\r\n           template: path.resolve(__dirname, \"../public/index.html\"),\r\n         }),\r\n-        // new ReactRefreshWebpackPlugin(), // 解决js的HMR功能运行时全局变量的问题\r\n+        new ReactRefreshWebpackPlugin(), // 解决js的HMR功能运行时全局变量的问题\r\n         // // 将public下面的资源复制到dist目录去（除了index.html）\r\n         // new CopyPlugin({\r\n         //   patterns: [\r\n         //     {\r\n"
                },
                {
                    "date": 1662338413307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,9 +96,9 @@\n                   //不压缩\r\n                   cacheCompression: false,\r\n                   plugins: [\r\n                     // \"@babel/plugin-transform-runtime\", // presets中包含了\r\n-                    // \"react-refresh/babel\", // 开启js的HMR功能\r\n+                    \"react-refresh/babel\", // 开启js的HMR功能\r\n                   ],\r\n                 },\r\n               },\r\n             ],\r\n"
                },
                {
                    "date": 1662340500140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n  * @version: \r\n  * @Author: Leojias\r\n  * @Date: 2022-09-04 04:06:02\r\n  * @LastEditors: Leojias\r\n- * @LastEditTime: 2022-09-05 08:39:51\r\n+ * @LastEditTime: 2022-09-05 09:14:59\r\n  * \r\n  */\r\n const path = require(\"path\");\r\n const ESLintWebpackPlugin = require(\"eslint-webpack-plugin\");\r\n@@ -162,10 +162,10 @@\n         open: true,\r\n         host: \"localhost\",\r\n         port: 3000,\r\n         hot: true,\r\n-        // compress: true,\r\n-        // historyApiFallback: true, // 解决react-router刷新404问题\r\n+        compress: true,\r\n+        historyApiFallback: true, // 解决react-router刷新404问题\r\n       },\r\n       mode: \"development\",\r\n       devtool: \"cheap-module-source-map\",\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1662370828004,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,11 +3,12 @@\n  * @version: \r\n  * @Author: Leojias\r\n  * @Date: 2022-09-04 04:06:02\r\n  * @LastEditors: Leojias\r\n- * @LastEditTime: 2022-09-05 09:14:59\r\n+ * @LastEditTime: 2022-09-05 17:40:27\r\n  * \r\n  */\r\n+//开发环境\r\n const path = require(\"path\");\r\n const ESLintWebpackPlugin = require(\"eslint-webpack-plugin\");\r\n const HtmlWebpackPlugin = require(\"html-webpack-plugin\");\r\n const ReactRefreshWebpackPlugin = require(\"@pmmmwh/react-refresh-webpack-plugin\");\r\n"
                }
            ],
            "date": 1662338294376,
            "name": "Commit-0",
            "content": "/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: Leojias\r\n * @Date: 2022-09-04 04:06:02\r\n * @LastEditors: Leojias\r\n * @LastEditTime: 2022-09-05 08:38:14\r\n * \r\n */\r\nconst path = require(\"path\");\r\nconst ESLintWebpackPlugin = require(\"eslint-webpack-plugin\");\r\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\r\nconst ReactRefreshWebpackPlugin = require(\"@pmmmwh/react-refresh-webpack-plugin\");\r\n// const CopyPlugin = require(\"copy-webpack-plugin\");\r\n\r\n//提取公共部分style-loader和css-loader并做了postcss兼容\r\nconst getStyleLoaders = (preProcessor) => {\r\n  return [\r\n    \"style-loader\",\r\n    \"css-loader\",\r\n    {\r\n      loader: \"postcss-loader\",\r\n      options: {\r\n        postcssOptions: {\r\n          plugins: [\r\n            // 在package.json里配置browserslist能解决大多数样式兼容性问题\r\n            \"postcss-preset-env\", \r\n          ],\r\n        },\r\n      },\r\n    },\r\n    preProcessor,\r\n  ].filter(Boolean);\r\n};\r\nmodule.exports = {\r\n    entry: \"./src/main.js\",\r\n    output: {\r\n      path: undefined,\r\n      //入口文件目录\r\n      filename: \"static/js/[name].js\",\r\n      //打包chunk目录动态导入的语法\r\n      chunkFilename: \"static/js/[name].chunk.js\",\r\n      //图片的目录\r\n      assetModuleFilename: \"static/js/[hash:10][ext][query]\",\r\n\r\n    },\r\n    module: {\r\n        rules: [\r\n          {\r\n            oneOf: [\r\n              {\r\n                // 用来匹配 .css 结尾的文件\r\n                test: /\\.css$/,\r\n                // use 数组里面 Loader 执行顺序是从右到左\r\n                use: getStyleLoaders(),\r\n              },\r\n              //less\r\n              {\r\n                test: /\\.less$/,\r\n                use: getStyleLoaders(\"less-loader\"),\r\n              },\r\n              //sacc\r\n              {\r\n                test: /\\.s[ac]ss$/,\r\n                use: getStyleLoaders(\"sass-loader\"),\r\n              },\r\n              //stylus\r\n              {\r\n                test: /\\.styl$/,\r\n                use: getStyleLoaders(\"stylus-loader\"),\r\n              },\r\n              //图片\r\n              {\r\n                test: /\\.(png|jpe?g|gif|svg)$/,\r\n                type: \"asset\",\r\n                //对图片优化\r\n                parser: {\r\n                  dataUrlCondition: {\r\n                    maxSize: 10 * 1024, // 小于10kb的图片会被base64处理\r\n                  },\r\n                },\r\n              },\r\n              //其他资源\r\n              {\r\n                test: /\\.(ttf|woff2?)$/,\r\n                type: \"asset/resource\",\r\n              },\r\n              //babel-loader处理js\r\n              {\r\n                test: /\\.(jsx|js)$/,\r\n                include: path.resolve(__dirname, \"../src\"),\r\n                loader: \"babel-loader\",\r\n                options: {\r\n                  //开启缓存\r\n                  cacheDirectory: true,\r\n                  //不压缩\r\n                  cacheCompression: false,\r\n                  plugins: [\r\n                    // \"@babel/plugin-transform-runtime\", // presets中包含了\r\n                    // \"react-refresh/babel\", // 开启js的HMR功能\r\n                  ],\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      },\r\n      plugins: [\r\n        //eslint插件\r\n        new ESLintWebpackPlugin({\r\n          context: path.resolve(__dirname, \"../src\"),\r\n          //排除node_module\r\n          exclude: \"node_modules\",\r\n          //开启缓存让第二次打包更好\r\n          cache: true,\r\n          cacheLocation: path.resolve(\r\n            __dirname,\r\n            \"../node_modules/.cache/.eslintcache\"\r\n          ),\r\n        }),\r\n        //html插件\r\n        new HtmlWebpackPlugin({\r\n          template: path.resolve(__dirname, \"../public/index.html\"),\r\n        }),\r\n        // new ReactRefreshWebpackPlugin(), // 解决js的HMR功能运行时全局变量的问题\r\n        // // 将public下面的资源复制到dist目录去（除了index.html）\r\n        // new CopyPlugin({\r\n        //   patterns: [\r\n        //     {\r\n        //       from: path.resolve(__dirname, \"../public\"),\r\n        //       to: path.resolve(__dirname, \"../dist\"),\r\n        //       toType: \"dir\",\r\n        //       noErrorOnMissing: true, // 不生成错误\r\n        //       globOptions: {\r\n        //         // 忽略文件\r\n        //         ignore: [\"**/index.html\"],\r\n        //       },\r\n        //       info: {\r\n        //         // 跳过terser压缩js\r\n        //         minimized: true,\r\n        //       },\r\n        //     },\r\n        //   ],\r\n        // }),\r\n      ],\r\n      //分包\r\n      optimization: {\r\n        splitChunks: {\r\n          chunks: \"all\",\r\n        },\r\n        //为了防止拆包失效\r\n        runtimeChunk: {\r\n          name: (entrypoint) => `runtime~${entrypoint.name}`,\r\n        },\r\n      },\r\n      //webpack解析模块加载选项\r\n      resolve: {\r\n        extensions: [\".jsx\", \".js\", \".json\"], // 自动补全文件扩展名，让jsx可以使用\r\n      },\r\n      //热更新\r\n      devServer: {\r\n        open: true,\r\n        host: \"localhost\",\r\n        port: 3000,\r\n        hot: true,\r\n        // compress: true,\r\n        // historyApiFallback: true, // 解决react-router刷新404问题\r\n      },\r\n      mode: \"development\",\r\n      devtool: \"cheap-module-source-map\",\r\n}"
        }
    ]
}